"use strict";(self.webpackChunk_zooniverse_fe_project=self.webpackChunk_zooniverse_fe_project||[]).push([[3622],{"../../node_modules/grommet/es6/components/Heading/Heading.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>Heading});var react=__webpack_require__("../../node_modules/react/index.js"),use_isomorphic_layout_effect=__webpack_require__("../../node_modules/grommet/es6/utils/use-isomorphic-layout-effect.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),mixins=__webpack_require__("../../node_modules/grommet/es6/utils/mixins.js"),colors=__webpack_require__("../../node_modules/grommet/es6/utils/colors.js"),styles=__webpack_require__("../../node_modules/grommet/es6/utils/styles.js"),console=__webpack_require__("../../node_modules/console-browserify/index.js"),colorStyle=(0,styled_components_browser_esm.css)(["color:",";"],(function(props){return(0,colors.$2)(props.colorProp||props.theme.heading.color,props.theme)})),StyledHeading=styled_components_browser_esm.default.h1.withConfig(styles.OY).withConfig({displayName:"StyledHeading",componentId:"sc-1rdh4aw-0"})([""," "," "," "," "," "," ",""],styles.m,(function(props){return function fontFamily(props){var font=(props.theme.heading.level[props.level]||{}).font;return font&&font.family?(0,styled_components_browser_esm.css)(["font-family:",";"],font.family):props.theme.heading.font?(0,styled_components_browser_esm.css)(["font-family:",";"],props.theme.heading.font.family):""}(props)}),(function(props){return function sizeStyle(props){var size=props.size||"medium",headingTheme=props.theme.heading,levelStyle=headingTheme.level[props.level];if(levelStyle){var data=levelStyle[size],styles=[(0,styled_components_browser_esm.css)(["font-size:",";line-height:",";max-width:",";font-weight:",";overflow-wrap:",";"],data?data.size:size,data?data.height:"normal",(props.fillProp?"none":data&&data.maxWidth)||levelStyle.medium.maxWidth,props.weight||levelStyle.font.weight||headingTheme.weight,props.overflowWrap)];if(props.responsive&&headingTheme.responsiveBreakpoint){var breakpoint=props.theme.global.breakpoints[headingTheme.responsiveBreakpoint];if(breakpoint){var responsiveData=headingTheme.level[props.level+1]?headingTheme.level[props.level+1][size]:headingTheme.level[props.level][size];responsiveData&&styles.push((0,mixins.Jj)(breakpoint,"\n            font-size: "+responsiveData.size+";\n            line-height: "+responsiveData.height+";\n            max-width: "+(props.fillProp?"none":responsiveData.maxWidth)+";\n          ",props.responsive))}}return styles}return console.warn("Heading level "+props.level+" is not defined in your theme."),""}(props)}),(function(props){return props.textAlign&&styles.O8}),(function(props){return props.truncate&&"\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"}),(function(props){return(props.colorProp||props.theme.heading.color)&&colorStyle}),(function(props){return props.theme.heading&&props.theme.heading.extend}));var HeadingPropTypes={},refs=__webpack_require__("../../node_modules/grommet/es6/utils/refs.js"),SkeletonContext=__webpack_require__("../../node_modules/grommet/es6/components/Skeleton/SkeletonContext.js"),Skeleton=__webpack_require__("../../node_modules/grommet/es6/components/Skeleton/Skeleton.js"),useThemeValue=__webpack_require__("../../node_modules/grommet/es6/utils/useThemeValue.js");function HeadingSkeleton_extends(){return HeadingSkeleton_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},HeadingSkeleton_extends.apply(null,arguments)}var HeadingSkeleton=(0,react.forwardRef)((function(_ref,ref){var _theme$heading$level$,responsiveSize,as=_ref.as,_ref$level=_ref.level,level=void 0===_ref$level?1:_ref$level,_ref$size=_ref.size,size=void 0===_ref$size?"medium":_ref$size,responsive=_ref.responsive,theme=(0,useThemeValue.i)().theme,height=(null==(_theme$heading$level$=theme.heading.level[level])||null==(_theme$heading$level$=_theme$heading$level$[size])?void 0:_theme$heading$level$.height)||size;if(responsive&&theme.heading.responsiveBreakpoint){var _theme$heading$level$2,_theme$heading$level$3,breakpoint=theme.global.breakpoints[theme.heading.responsiveBreakpoint];if(breakpoint)responsiveSize={breakpoint,height:(theme.heading.level[level+1]?null==(_theme$heading$level$2=theme.heading.level[level+1][size])?void 0:_theme$heading$level$2.height:null==(_theme$heading$level$3=theme.heading.level[level][size])?void 0:_theme$heading$level$3.height)||height}}return react.createElement(Skeleton.E,HeadingSkeleton_extends({as,ref,height,responsive,responsiveSize},theme.heading.skeleton))}));HeadingSkeleton.displayName="HeadingSkeleton";var ResponsiveContainerContext=__webpack_require__("../../node_modules/grommet/es6/contexts/ResponsiveContainerContext.js"),_excluded=["children","color","fill","level","overflowWrap","responsive","weight"];function Heading_extends(){return Heading_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Heading_extends.apply(null,arguments)}var Heading=(0,react.forwardRef)((function(_ref,ref){var children=_ref.children,color=_ref.color,fill=_ref.fill,_ref$level=_ref.level,level=void 0===_ref$level?1:_ref$level,overflowWrapProp=_ref.overflowWrap,_ref$responsive=_ref.responsive,responsiveProp=void 0===_ref$responsive||_ref$responsive,weight=_ref.weight,rest=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(_ref,_excluded),passThemeFlag=(0,useThemeValue.i)().passThemeFlag,headingRef=(0,refs.N)(ref),_useState=(0,react.useState)(overflowWrapProp||"break-word"),overflowWrap=_useState[0],setOverflowWrap=_useState[1],responsive=(0,react.useContext)(ResponsiveContainerContext.x)&&responsiveProp?"container":responsiveProp,skeleton=(0,SkeletonContext.B)();(0,use_isomorphic_layout_effect.N)((function(){var updateOverflowWrap=function updateOverflowWrap(){var wrap;!overflowWrapProp&&headingRef.current&&(wrap=headingRef.current.scrollWidth>headingRef.current.offsetWidth?"anywhere":"break-word",setOverflowWrap(wrap))};return window.addEventListener("resize",updateOverflowWrap),updateOverflowWrap(),function(){return window.removeEventListener("resize",updateOverflowWrap)}}),[headingRef,overflowWrapProp]);var content=children;return skeleton&&(content=react.createElement(HeadingSkeleton,Heading_extends({level,fill,responsive},rest))),react.createElement(StyledHeading,Heading_extends({as:"h"+level,colorProp:color,fillProp:fill,level:+level,overflowWrap,responsive,weight},passThemeFlag,rest,{ref:headingRef}),content)}));Heading.displayName="Heading",Heading.propTypes=HeadingPropTypes},"./src/shared/components/CollectionsModal/CollectionsModalContainer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>CollectionsModal_CollectionsModalContainer});var defineProperty=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("../../node_modules/react/index.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),Modal=__webpack_require__("../lib-react-components/dist/esm/Modal/Modal.js"),es=__webpack_require__("../../node_modules/react-i18next/dist/es/index.js"),__jsx=react.createElement;function CollectionsModal(_ref){var _ref$active=_ref.active,active=void 0!==_ref$active&&_ref$active,children=_ref.children,closeFn=_ref.closeFn,t=(0,es.Bd)("components").t;return __jsx(Modal.A,{active,closeFn,title:t("CollectionsModal.title")},children)}CollectionsModal.displayName="CollectionsModal",CollectionsModal.propTypes={active:prop_types_default().bool,closeFn:prop_types_default().func.isRequired};const CollectionsModal_CollectionsModal=CollectionsModal;CollectionsModal.__docgenInfo={description:"",methods:[],displayName:"CollectionsModal",props:{active:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},closeFn:{description:"",type:{name:"func"},required:!0}}};var asyncToGenerator=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("../../node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),Grid=__webpack_require__("../../node_modules/grommet/es6/components/Grid/Grid.js"),FormField=__webpack_require__("../../node_modules/grommet/es6/components/FormField/FormField.js"),Select=__webpack_require__("../../node_modules/grommet/es6/components/Select/Select.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),SelectCollection_jsx=react.createElement;function SelectCollection(_ref){var _ref$collections=_ref.collections,collections=void 0===_ref$collections?[]:_ref$collections,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,onSearch=_ref.onSearch,onSelect=_ref.onSelect,onSubmit=_ref.onSubmit,_ref$selected=_ref.selected,selected=void 0===_ref$selected?{}:_ref$selected,_ref$userID=_ref.userID,userID=void 0===_ref$userID?"":_ref$userID,_useState=(0,react.useState)(""),searchText=_useState[0],setSearchText=_useState[1],t=(0,es.Bd)("components").t;function _onTextChange(){return(_onTextChange=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee(text){var search;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return search=text.trim(),_context.next=3,onSearch({favorite:!1,current_user_roles:"owner,collaborator,contributor",search:search.length>3?search:void 0});case 3:setSearchText(search);case 4:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}var options=searchText.length>3?collections:collections.filter((function collectionNameFilter(collection){var _collection$display_n,displayNameLowerCase=null==collection||null===(_collection$display_n=collection.display_name)||void 0===_collection$display_n?void 0:_collection$display_n.toLowerCase();return!!displayNameLowerCase&&displayNameLowerCase.includes(searchText.toLowerCase())}));return SelectCollection_jsx(Grid.x,{as:"form",columns:["2fr","1fr"],gap:"small",rows:["1fr"],method:"post",action:"",onSubmit},SelectCollection_jsx(FormField.z,{htmlFor:"collectionsSearch",label:t("CollectionsModal.SelectCollection.label")},SelectCollection_jsx(Select.l,{dropHeight:"medium",dropProps:{trapFocus:!1},id:"collectionsSearch",labelKey:function collectionLabel(collection){var _collection$links,_collection$links2;return(null==collection||null===(_collection$links=collection.links)||void 0===_collection$links||null===(_collection$links=_collection$links.owner)||void 0===_collection$links?void 0:_collection$links.id)===userID?null==collection?void 0:collection.display_name:"".concat(null==collection?void 0:collection.display_name," (").concat(null==collection||null===(_collection$links2=collection.links)||void 0===_collection$links2||null===(_collection$links2=_collection$links2.owner)||void 0===_collection$links2?void 0:_collection$links2.display_name,")")},name:"display_name",onChange:onSelect,onSearch:function onTextChange(_x){return _onTextChange.apply(this,arguments)},options,valueKey:"id",value:selected})),SelectCollection_jsx(Box.a,{align:"center",margin:{top:"medium"},pad:{top:"small"}},SelectCollection_jsx(Button.$,{disabled,label:t("CollectionsModal.SelectCollection.addButton"),type:"submit"})))}SelectCollection.displayName="SelectCollection",SelectCollection.propTypes={disabled:prop_types_default().bool,selected:prop_types_default().shape({})};const SelectCollection_SelectCollection=(0,mobxreact_esm.PA)(SelectCollection);SelectCollection.__docgenInfo={description:"",methods:[],displayName:"SelectCollection",props:{collections:{defaultValue:{value:"[]",computed:!1},required:!1},disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},selected:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{}},required:!1},userID:{defaultValue:{value:"''",computed:!1},required:!1}}};var TextInput=__webpack_require__("../../node_modules/grommet/es6/components/TextInput/TextInput.js"),CheckBox=__webpack_require__("../../node_modules/grommet/es6/components/CheckBox/CheckBox.js"),CreateCollection_jsx=react.createElement,defaultCollection={display_name:"",private:!1},DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function CreateCollection(_ref){var _ref$collection=_ref.collection,collection=void 0===_ref$collection?defaultCollection:_ref$collection,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$onChange=_ref.onChange,onChange=void 0===_ref$onChange?DEFAULT_HANDLER:_ref$onChange,_ref$onSubmit=_ref.onSubmit,onSubmit=void 0===_ref$onSubmit?DEFAULT_HANDLER:_ref$onSubmit,t=(0,es.Bd)("components").t,checkboxRef=(0,react.useRef)(),textInputRef=(0,react.useRef)(),display_name=collection.display_name,isPrivate=collection.private;function updateCollection(){var display_name=textInputRef.current.value,isPrivate=checkboxRef.current.checked;onChange({display_name,private:isPrivate})}return CreateCollection_jsx(Grid.x,{as:"form",columns:["2fr","1fr"],gap:"small",rows:["1fr"],method:"post",action:"",onSubmit},CreateCollection_jsx(FormField.z,{htmlFor:"collectionName",label:t("CollectionsModal.CreateCollection.label")},CreateCollection_jsx(TextInput.k,{id:"collectionName",onChange:updateCollection,ref:textInputRef,value:display_name})),CreateCollection_jsx(Box.a,{align:"center",margin:{top:"medium"},pad:{top:"small"}},CreateCollection_jsx(Button.$,{disabled,label:t("CollectionsModal.CreateCollection.createButton"),type:"submit"})),CreateCollection_jsx(CheckBox.o,{checked:isPrivate,label:t("CollectionsModal.CreateCollection.private"),onChange:updateCollection,ref:checkboxRef}))}CreateCollection.displayName="CreateCollection",CreateCollection.propTypes={collection:prop_types_default().shape({display_name:prop_types_default().string,private:prop_types_default().bool}),disabled:prop_types_default().bool,onChange:prop_types_default().func,onSubmit:prop_types_default().func};const CreateCollection_CreateCollection=CreateCollection;CreateCollection.__docgenInfo={description:"",methods:[],displayName:"CreateCollection",props:{collection:{defaultValue:{value:"{\n  display_name: '',\n  private: false\n}",computed:!1},description:"",type:{name:"shape",value:{display_name:{name:"string",required:!1},private:{name:"bool",required:!1}}},required:!1},disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onChange:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onSubmit:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1}}};var CollectionsModalContainer_jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var CollectionsModalContainer_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0},defaultNewCollection={display_name:"",private:!1},CollectionsModalContainer=function CollectionsModalContainer(_ref){var _ref$collectionsModal=_ref.collectionsModalActive,collectionsModalActive=void 0!==_ref$collectionsModal&&_ref$collectionsModal,_ref$setCollectionsMo=_ref.setCollectionsModalActive,setCollectionsModalActive=void 0===_ref$setCollectionsMo?CollectionsModalContainer_DEFAULT_HANDLER:_ref$setCollectionsMo,_ref$subjectID=_ref.subjectID,subjectID=void 0===_ref$subjectID?"":_ref$subjectID,_useStore=function useStore(){var _store$user,store=(0,react.useContext)(mobxreact_esm.Db).store,id=store.user.id,_store$user$collectio=null===(_store$user=store.user)||void 0===_store$user?void 0:_store$user.collections;return{addSubjects:_store$user$collectio.addSubjects,collections:_store$user$collectio.collections,createCollection:_store$user$collectio.createCollection,searchCollections:_store$user$collectio.searchCollections,userID:id}}(),_useStore$addSubjects=_useStore.addSubjects,addSubjects=void 0===_useStore$addSubjects?CollectionsModalContainer_DEFAULT_HANDLER:_useStore$addSubjects,_useStore$collections=_useStore.collections,collections=void 0===_useStore$collections?[]:_useStore$collections,_useStore$createColle=_useStore.createCollection,createCollection=void 0===_useStore$createColle?CollectionsModalContainer_DEFAULT_HANDLER:_useStore$createColle,_useStore$searchColle=_useStore.searchCollections,searchCollections=void 0===_useStore$searchColle?CollectionsModalContainer_DEFAULT_HANDLER:_useStore$searchColle,_useStore$userID=_useStore.userID,userID=void 0===_useStore$userID?"":_useStore$userID,_useState=(0,react.useState)(defaultNewCollection),newCollection=_useState[0],setNewCollection=_useState[1],_useState2=(0,react.useState)(void 0),selectedCollection=_useState2[0],setSelectedCollection=_useState2[1];function close(){setCollectionsModalActive(!1)}return CollectionsModalContainer_jsx(CollectionsModal_CollectionsModal,{active:collectionsModalActive,closeFn:close},CollectionsModalContainer_jsx(SelectCollection_SelectCollection,{collections,disabled:!selectedCollection,onSearch:searchCollections,onSelect:function onSelect(event){var collection=event.value;setSelectedCollection(collection)},onSubmit:function addToCollection(event){event.preventDefault(),addSubjects(selectedCollection.id,[subjectID]),close()},selected:selectedCollection,userID}),CollectionsModalContainer_jsx(CreateCollection_CreateCollection,{disabled:!newCollection.display_name,collection:newCollection,onChange:function updateCollection(collectionDetails){var updatedCollection=_objectSpread(_objectSpread({},newCollection),collectionDetails);setNewCollection(updatedCollection)},onSearch:searchCollections,onSubmit:function createNewCollection(event){event.preventDefault(),createCollection(newCollection,[subjectID]),close()}}))};CollectionsModalContainer.displayName="CollectionsModalContainer";const CollectionsModal_CollectionsModalContainer=(0,mobxreact_esm.PA)(CollectionsModalContainer);CollectionsModalContainer.propTypes={collectionsModalActive:prop_types.bool,setCollectionsModalActive:prop_types.func,subjectID:prop_types.string},CollectionsModalContainer.__docgenInfo={description:"",methods:[],displayName:"CollectionsModalContainer",props:{collectionsModalActive:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},setCollectionsModalActive:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},subjectID:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1}}}}}]);