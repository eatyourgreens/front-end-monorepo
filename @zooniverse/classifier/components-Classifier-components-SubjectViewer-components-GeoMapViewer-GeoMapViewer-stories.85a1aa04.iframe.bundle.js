"use strict";(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[1134],{"./src/components/Classifier/components/SubjectViewer/components/GeoMapViewer/GeoMapViewer.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),ol__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/ol/Map.js"),ol__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/ol/View.js"),ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/ol/format/GeoJSON.js"),ol_layer_Tile__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/ol/layer/Tile.js"),ol_layer_Vector__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/ol/layer/Vector.js"),ol_source_OSM__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/ol/source/OSM.js"),ol_source_Vector__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/ol/source/Vector.js"),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/prop-types/index.js"),react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),MapContainer=styled_components__WEBPACK_IMPORTED_MODULE_10__.default.div.withConfig({displayName:"GeoMapViewer__MapContainer",componentId:"sc-ut4gi2-0"})(["height:100%;min-height:400px;width:100%;"]);function GeoMapViewer(_ref){var _ref$geoJSON=_ref.geoJSON,geoJSON=void 0===_ref$geoJSON?void 0:_ref$geoJSON,mapContainerRef=(0,react__WEBPACK_IMPORTED_MODULE_9__.useRef)(),mapRef=(0,react__WEBPACK_IMPORTED_MODULE_9__.useRef)(),featuresRef=(0,react__WEBPACK_IMPORTED_MODULE_9__.useRef)(),geoJSONFormatRef=(0,react__WEBPACK_IMPORTED_MODULE_9__.useRef)();return(0,react__WEBPACK_IMPORTED_MODULE_9__.useEffect)(function createMapOnce(){if(!mapRef.current&&mapContainerRef.current){var format=new ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_3__.A;geoJSONFormatRef.current=format;var osmLayer=new ol_layer_Tile__WEBPACK_IMPORTED_MODULE_4__.A({preload:1,source:new ol_source_OSM__WEBPACK_IMPORTED_MODULE_6__.A}),featuresSource=new ol_source_Vector__WEBPACK_IMPORTED_MODULE_7__.A({features:[]});featuresRef.current=featuresSource;var featuresLayer=new ol_layer_Vector__WEBPACK_IMPORTED_MODULE_5__.A({source:featuresSource}),map=new ol__WEBPACK_IMPORTED_MODULE_1__.A({target:mapContainerRef.current,layers:[osmLayer,featuresLayer],view:new ol__WEBPACK_IMPORTED_MODULE_2__.Ay({center:[0,0],zoom:0})});return mapRef.current=map,function(){map.setTarget(void 0),mapRef.current=void 0,featuresRef.current=void 0,geoJSONFormatRef.current=void 0}}},[]),(0,react__WEBPACK_IMPORTED_MODULE_9__.useEffect)(function updateFeatures(){var map=mapRef.current,features=featuresRef.current;if(map&&features){var format=geoJSONFormatRef.current||new ol_format_GeoJSON__WEBPACK_IMPORTED_MODULE_3__.A;if(geoJSONFormatRef.current=format,features.clear(),geoJSON){var geoJSONfeatures=format.readFeatures(geoJSON,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});features.addFeatures(geoJSONfeatures)}}},[geoJSON]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{as:"section",fill:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(MapContainer,{ref:mapContainerRef,className:"map-container","data-testid":"geo-map-container"})})}GeoMapViewer.propTypes={geoJSON:(0,prop_types__WEBPACK_IMPORTED_MODULE_8__.shape)({})};const __WEBPACK_DEFAULT_EXPORT__=GeoMapViewer;GeoMapViewer.__docgenInfo={description:"",methods:[],displayName:"GeoMapViewer",props:{geoJSON:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"shape",value:{}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/GeoMapViewer/GeoMapViewer.stories.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,EiffelTower:()=>EiffelTower,FourCornersMarker:()=>FourCornersMarker,StatueOfLiberty:()=>StatueOfLiberty,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={title:"Subject Viewers / GeoMapViewer",component:__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/GeoMapViewer/GeoMapViewer.jsx").A},Default={args:{}},EiffelTower={args:{geoJSON:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[2.294481,48.8583701]},properties:{name:"Eiffel Tower"}}]}}},StatueOfLiberty={args:{geoJSON:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[-74.0445004,40.6892494]},properties:{name:"Statue of Liberty"}}]}}},FourCornersMarker={args:{geoJSON:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[-109.0451723,36.9989766]},properties:{name:"Four Corners Monument"}}]}}},__namedExportsOrder=["Default","EiffelTower","StatueOfLiberty","FourCornersMarker"]}}]);