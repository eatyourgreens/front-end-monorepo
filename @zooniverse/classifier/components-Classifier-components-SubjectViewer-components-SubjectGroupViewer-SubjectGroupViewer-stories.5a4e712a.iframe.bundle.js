/*! For license information please see components-Classifier-components-SubjectViewer-components-SubjectGroupViewer-SubjectGroupViewer-stories.5a4e712a.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[1054],{"../../node_modules/sinon/pkg sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="../../node_modules/sinon/pkg sync recursive",module.exports=webpackEmptyContext},"../../node_modules/valid-url/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{!function(module){"use strict";module.exports.is_uri=is_iri,module.exports.is_http_uri=is_http_iri,module.exports.is_https_uri=is_https_iri,module.exports.is_web_uri=is_web_iri,module.exports.isUri=is_iri,module.exports.isHttpUri=is_http_iri,module.exports.isHttpsUri=is_https_iri,module.exports.isWebUri=is_web_iri;var splitUri=function(uri){return uri.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)};function is_iri(value){if(value&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(value)&&!/%[^0-9a-f]/i.test(value)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value)){var splitted,authority,path,query,fragment,scheme="",out="";if(scheme=(splitted=splitUri(value))[1],authority=splitted[2],path=splitted[3],query=splitted[4],fragment=splitted[5],scheme&&scheme.length&&path.length>=0){if(authority&&authority.length){if(0!==path.length&&!/^\//.test(path))return}else if(/^\/\//.test(path))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(scheme.toLowerCase()))return out+=scheme+":",authority&&authority.length&&(out+="//"+authority),out+=path,query&&query.length&&(out+="?"+query),fragment&&fragment.length&&(out+="#"+fragment),out}}}function is_http_iri(value,allowHttps){if(is_iri(value)){var splitted,path,query,fragment,scheme="",authority="",port="",out="";if(scheme=(splitted=splitUri(value))[1],authority=splitted[2],path=splitted[3],query=splitted[4],fragment=splitted[5],scheme){if(allowHttps){if("https"!=scheme.toLowerCase())return}else if("http"!=scheme.toLowerCase())return;if(authority)return/:(\d+)$/.test(authority)&&(port=authority.match(/:(\d+)$/)[0],authority=authority.replace(/:\d+$/,"")),out+=scheme+":",out+="//"+authority,port&&(out+=port),out+=path,query&&query.length&&(out+="?"+query),fragment&&fragment.length&&(out+="#"+fragment),out}}}function is_https_iri(value){return is_http_iri(value,!0)}function is_web_iri(value){return is_http_iri(value)||is_https_iri(value)}}(module=__webpack_require__.nmd(module))},"./src/components/Classifier/components/ImageToolbar/components/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{MA:()=>_ZoomOutButton__WEBPACK_IMPORTED_MODULE_7__.A,U9:()=>_ResetButton__WEBPACK_IMPORTED_MODULE_4__.A,Z8:()=>_ZoomInButton__WEBPACK_IMPORTED_MODULE_6__.A,g3:()=>_MoveButton__WEBPACK_IMPORTED_MODULE_3__.A,vB:()=>_AnnotateButton__WEBPACK_IMPORTED_MODULE_0__.A,wi:()=>_RotateButton__WEBPACK_IMPORTED_MODULE_5__.A,zj:()=>_InvertButton__WEBPACK_IMPORTED_MODULE_2__.A});var _AnnotateButton__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/AnnotateButton/index.js"),_InvertButton__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/FullscreenButton/index.js"),__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/InvertButton/index.js")),_MoveButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/MoveButton/index.js"),_ResetButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ResetButton/index.js"),_RotateButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/RotateButton/index.js"),_ZoomInButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ZoomInButton/index.js"),_ZoomOutButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ZoomOutButton/index.js")},"./src/components/Classifier/components/SubjectViewer/components/SubjectGroupViewer/SubjectGroupViewer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>SubjectGroupViewer_SubjectGroupViewer});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),SVGContext=__webpack_require__("./src/plugins/drawingTools/shared/SVGContext.js"),components=__webpack_require__("./src/plugins/drawingTools/components/index.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!1},DraggableImage=(0,styled_components_browser_esm.default)((0,components.kZ)("image")).withConfig({displayName:"SGVGridCell__DraggableImage",componentId:"sc-6shm7j-0"})(["cursor:grab;}"]),DraggableRect=(0,styled_components_browser_esm.default)((0,components.kZ)("rect")).withConfig({displayName:"SGVGridCell__DraggableRect",componentId:"sc-6shm7j-1"})(["cursor:grab;}"]),ClickableRect=(0,styled_components_browser_esm.default)("rect").withConfig({displayName:"SGVGridCell__ClickableRect",componentId:"sc-6shm7j-2"})(["cursor:pointer;&:focus{","}}"],(function(props){return(0,styled_components_browser_esm.css)(["outline:",";"],props.cellStyle.focusOutline)}));function SGVGridCell(props){var _props$image=props.image,image=void 0===_props$image?void 0:_props$image,_props$index=props.index,index=void 0===_props$index?0:_props$index,_props$subjectId=props.subjectId,subjectId=void 0===_props$subjectId?"":_props$subjectId,_props$dragMove=props.dragMove,dragMove=void 0===_props$dragMove?DEFAULT_HANDLER:_props$dragMove,_props$cellWidth=props.cellWidth,cellWidth=void 0===_props$cellWidth?200:_props$cellWidth,_props$cellHeight=props.cellHeight,cellHeight=void 0===_props$cellHeight?200:_props$cellHeight,_props$cellStyle=props.cellStyle,cellStyle=void 0===_props$cellStyle?{}:_props$cellStyle,_props$gridRows=props.gridRows,gridRows=void 0===_props$gridRows?1:_props$gridRows,_props$gridColumns=props.gridColumns,gridColumns=void 0===_props$gridColumns?1:_props$gridColumns,_props$panX=props.panX,panX=void 0===_props$panX?0:_props$panX,_props$panY=props.panY,panY=void 0===_props$panY?0:_props$panY,_props$zoom=props.zoom,zoom=void 0===_props$zoom?1:_props$zoom,_props$annotation=props.annotation,annotation=void 0===_props$annotation?void 0:_props$annotation,_props$annotationMode=props.annotationMode,annotationMode=void 0===_props$annotationMode||_props$annotationMode,_props$cellAnnotated=props.cellAnnotated,cellAnnotated=void 0!==_props$cellAnnotated&&_props$cellAnnotated,_useState2=_slicedToArray((0,react.useState)(cellAnnotated),2),checked=_useState2[0],setChecked=_useState2[1],row=Math.floor(index/gridColumns),col=index%gridColumns,cellXOffset=col*cellWidth,cellYOffset=row*cellHeight;if(!image||!image.src||!image.naturalHeight||!image.naturalWidth||row<0||row>=gridRows||col<0||col>=gridColumns||!cellWidth||!cellHeight||!gridColumns||!gridRows)return null;var fitRatio=Math.max(image.naturalWidth/cellWidth,image.naturalHeight/cellHeight),imageHeight=image.naturalHeight/fitRatio,imageWidth=image.naturalWidth/fitRatio,imageX=(cellWidth-imageWidth)/2,imageY=(cellHeight-imageHeight)/2,clipPathID="subjectGroupViewer-clipPath-".concat(index);function toggleCellAnnotation(){var _annotation$value;if(annotationMode&&null!=annotation&&annotation.value){var toggledValue=!checked;setChecked(toggledValue);var annotationValue=(null==annotation||null===(_annotation$value=annotation.value)||void 0===_annotation$value?void 0:_annotation$value.slice())||[],isThisCellSelected=annotationValue.find((function(item){return item.index===index}));if(isThisCellSelected&&!toggledValue){var indexInValue=annotationValue.indexOf(isThisCellSelected);annotationValue.splice(indexInValue,1)}else!isThisCellSelected&&toggledValue&&annotationValue.push({index,subject:subjectId});null!=annotation&&annotation.update&&annotation.update(annotationValue)}}var addOriginOffset="translate(".concat(imageWidth/2,", ").concat(imageHeight/2,")"),removeOriginOffset="translate(".concat(-imageWidth/2,", ").concat(-imageHeight/2,")"),imageTransform="".concat(addOriginOffset," scale(").concat(zoom,") ").concat(removeOriginOffset," translate(").concat(panX,", ").concat(panY,")");return(0,jsx_runtime.jsxs)("g",{transform:"translate(".concat(cellXOffset,", ").concat(cellYOffset,")"),children:[(0,jsx_runtime.jsx)("clipPath",{id:clipPathID,children:(0,jsx_runtime.jsx)("rect",{width:cellWidth,height:cellHeight})}),(0,jsx_runtime.jsx)(DraggableRect,{fill:cellStyle.background,width:cellWidth,height:cellHeight,dragMove}),(0,jsx_runtime.jsxs)("g",{clipPath:"url(#".concat(clipPathID,")"),children:[(0,jsx_runtime.jsx)(DraggableImage,{dragMove,height:imageHeight,width:imageWidth,href:image.src,x:imageX,y:imageY,transform:imageTransform}),(0,jsx_runtime.jsx)(DraggableRect,{fill:checked?cellStyle.overlay:"none",stroke:checked?cellStyle.selectedStroke:cellStyle.stroke,strokeWidth:checked?cellStyle.selectedStrokeWidth:cellStyle.strokeWidth,width:cellWidth,height:cellHeight}),annotationMode&&(0,jsx_runtime.jsx)(ClickableRect,{tabIndex:0,role:"checkbox","aria-checked":checked,"aria-label":"Cell at row ".concat(row," column ").concat(col),fill:"transparent",cellStyle,x:2,y:2,width:cellWidth-4,height:cellHeight-4,onClick:function onClick(e){toggleCellAnnotation(),e.preventDefault()},onKeyPress:function onKeyPress(e){"Enter"===e.key&&(toggleCellAnnotation(),e.preventDefault())}})]})]})}SGVGridCell.displayName="SGVGridCell",SGVGridCell.propTypes={image:prop_types_default().object,index:prop_types_default().number,subjectId:prop_types_default().string,dragMove:prop_types_default().func,cellWidth:prop_types_default().number,cellHeight:prop_types_default().number,cellStyle:prop_types_default().object,gridRows:prop_types_default().number,gridColumns:prop_types_default().number,panX:prop_types_default().number,panY:prop_types_default().number,zoom:prop_types_default().number,annotation:prop_types_default().shape({update:prop_types_default().func,value:prop_types_default().array}),annotationMode:prop_types_default().bool,cellAnnotated:prop_types_default().bool};const SGVGridCell_SGVGridCell=SGVGridCell;SGVGridCell.__docgenInfo={description:"",methods:[],displayName:"SGVGridCell",props:{image:{description:"",type:{name:"object"},required:!1},index:{description:"",type:{name:"number"},required:!1},subjectId:{description:"",type:{name:"string"},required:!1},dragMove:{description:"",type:{name:"func"},required:!1},cellWidth:{description:"",type:{name:"number"},required:!1},cellHeight:{description:"",type:{name:"number"},required:!1},cellStyle:{description:"",type:{name:"object"},required:!1},gridRows:{description:"",type:{name:"number"},required:!1},gridColumns:{description:"",type:{name:"number"},required:!1},panX:{description:"",type:{name:"number"},required:!1},panY:{description:"",type:{name:"number"},required:!1},zoom:{description:"",type:{name:"number"},required:!1},annotation:{description:"",type:{name:"shape",value:{update:{name:"func",required:!1},value:{name:"array",required:!1}}},required:!1},annotationMode:{description:"",type:{name:"bool"},required:!1},cellAnnotated:{description:"",type:{name:"bool"},required:!1}}};var DEFAULT_CELL_STYLE={},DEFAULT_IMAGES=[],SubjectGroupViewer_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!1},DEFAULT_SUBJECT_IDS=[],Container=styled_components_browser_esm.default.div.withConfig({displayName:"SubjectGroupViewer__Container",componentId:"sc-koei8i-0"})(["overflow:hidden;height:100%;width:100%;"," "," animation:fadein 1s 0s forwards;@keyframes fadein{from{opacity:0;}to{opacity:100%;}}"],(function(props){return props.gridMaxWidth?(0,styled_components_browser_esm.css)(["max-width:",";"],props.gridMaxWidth):""}),(function(props){return props.gridMaxHeight?(0,styled_components_browser_esm.css)(["max-height:",";"],props.gridMaxHeight):""})),SVG=styled_components_browser_esm.default.svg.withConfig({displayName:"SubjectGroupViewer__SVG",componentId:"sc-koei8i-1"})(["width:100%;height:100%;"," ",""],(function(props){return props.gridMaxWidth?(0,styled_components_browser_esm.css)(["max-width:",";"],props.gridMaxWidth):""}),(function(props){return props.gridMaxHeight?(0,styled_components_browser_esm.css)(["max-height:",";"],props.gridMaxHeight):""})),SubjectGroupViewer=(0,react.forwardRef)((function SubjectGroupViewer(_ref,ref){var _ref$images=_ref.images,images=void 0===_ref$images?DEFAULT_IMAGES:_ref$images,_ref$subjectIds=_ref.subjectIds,subjectIds=void 0===_ref$subjectIds?DEFAULT_SUBJECT_IDS:_ref$subjectIds,_ref$dragMove=_ref.dragMove,dragMove=void 0===_ref$dragMove?SubjectGroupViewer_DEFAULT_HANDLER:_ref$dragMove,_ref$onKeyDown=_ref.onKeyDown,onKeyDown=void 0===_ref$onKeyDown?SubjectGroupViewer_DEFAULT_HANDLER:_ref$onKeyDown,_ref$cellWidth=_ref.cellWidth,cellWidth=void 0===_ref$cellWidth?200:_ref$cellWidth,_ref$cellHeight=_ref.cellHeight,cellHeight=void 0===_ref$cellHeight?200:_ref$cellHeight,_ref$cellStyle=_ref.cellStyle,cellStyle=void 0===_ref$cellStyle?DEFAULT_CELL_STYLE:_ref$cellStyle,_ref$gridRows=_ref.gridRows,gridRows=void 0===_ref$gridRows?1:_ref$gridRows,_ref$gridColumns=_ref.gridColumns,gridColumns=void 0===_ref$gridColumns?1:_ref$gridColumns,_ref$gridMaxWidth=_ref.gridMaxWidth,gridMaxWidth=void 0===_ref$gridMaxWidth?"":_ref$gridMaxWidth,_ref$gridMaxHeight=_ref.gridMaxHeight,gridMaxHeight=void 0===_ref$gridMaxHeight?"":_ref$gridMaxHeight,width=_ref.width,height=_ref.height,_ref$panX=_ref.panX,panX=void 0===_ref$panX?0:_ref$panX,_ref$panY=_ref.panY,panY=void 0===_ref$panY?0:_ref$panY,_ref$zoom=_ref.zoom,zoom=void 0===_ref$zoom?1:_ref$zoom,annotation=_ref.annotation,_ref$interactionMode=_ref.interactionMode,interactionMode=void 0===_ref$interactionMode?"move":_ref$interactionMode,_ref$isCurrentTaskVal=_ref.isCurrentTaskValidForAnnotation,isCurrentTaskValidForAnnotation=void 0!==_ref$isCurrentTaskVal&&_ref$isCurrentTaskVal,transformLayer=(0,react.useRef)(),canvas=transformLayer.current,annotatedValues=(null==annotation?void 0:annotation.value)||[],annotationMode="annotate"===interactionMode&&isCurrentTaskValidForAnnotation;return(0,jsx_runtime.jsx)(SVGContext.A.Provider,{value:{canvas},children:(0,jsx_runtime.jsx)(Container,{gridMaxWidth,gridMaxHeight,children:(0,jsx_runtime.jsx)(SVG,{ref,focusable:!0,onKeyDown,tabIndex:0,viewBox:"0 0 ".concat(width," ").concat(height),gridMaxWidth,gridMaxHeight,xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("g",{ref:transformLayer,children:images.map((function(image,index){return(0,jsx_runtime.jsx)(SGVGridCell_SGVGridCell,{image,index,subjectId:subjectIds[index],dragMove,cellWidth,cellHeight,cellStyle,gridRows,gridColumns,panX,panY,zoom,annotation,annotationMode,cellAnnotated:annotatedValues.includes(index)},"sgv-grid-cell-".concat(index))}))})})})})}));SubjectGroupViewer.propTypes={images:prop_types_default().array,subjectIds:prop_types_default().arrayOf(prop_types_default().string),dragMove:prop_types_default().func,onKeyDown:prop_types_default().func,cellWidth:prop_types_default().number,cellHeight:prop_types_default().number,cellStyle:prop_types_default().object,gridRows:prop_types_default().number,gridColumns:prop_types_default().number,gridMaxWidth:prop_types_default().string,gridMaxHeight:prop_types_default().string,width:prop_types_default().number.isRequired,height:prop_types_default().number.isRequired,panX:prop_types_default().number,panY:prop_types_default().number,zoom:prop_types_default().number,annotation:prop_types_default().shape({update:prop_types_default().func,value:prop_types_default().array}),interactionMode:prop_types_default().oneOf(["annotate","move"]),isCurrentTaskValidForAnnotation:prop_types_default().bool};const SubjectGroupViewer_SubjectGroupViewer=SubjectGroupViewer;SubjectGroupViewer.__docgenInfo={description:"",methods:[],displayName:"SubjectGroupViewer",props:{images:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"array"},required:!1},subjectIds:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},dragMove:{defaultValue:{value:"() => false",computed:!1},description:"",type:{name:"func"},required:!1},onKeyDown:{defaultValue:{value:"() => false",computed:!1},description:"",type:{name:"func"},required:!1},cellWidth:{defaultValue:{value:"200",computed:!1},description:"",type:{name:"number"},required:!1},cellHeight:{defaultValue:{value:"200",computed:!1},description:"",type:{name:"number"},required:!1},cellStyle:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},gridRows:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"number"},required:!1},gridColumns:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"number"},required:!1},gridMaxWidth:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},gridMaxHeight:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},panX:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},panY:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},zoom:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"number"},required:!1},interactionMode:{defaultValue:{value:"'move'",computed:!1},description:"",type:{name:"enum",value:[{value:"'annotate'",computed:!1},{value:"'move'",computed:!1}]},required:!1},isCurrentTaskValidForAnnotation:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},width:{description:"",type:{name:"number"},required:!0},height:{description:"",type:{name:"number"},required:!0},annotation:{description:"",type:{name:"shape",value:{update:{name:"func",required:!1},value:{name:"array",required:!1}}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SubjectGroupViewer/SubjectGroupViewer.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithZoomControls:()=>WithZoomControls,__namedExportsOrder:()=>__namedExportsOrder,default:()=>SubjectGroupViewer_stories});__webpack_require__("../../node_modules/sinon/pkg/sinon-esm.js");var Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),rosie=__webpack_require__("../../node_modules/rosie/src/rosie.js"),hooks=__webpack_require__("./src/hooks/index.js"),mockStore=(__webpack_require__("./src/store/SubjectViewerStore/index.js"),__webpack_require__("./test/mockStore/index.js")),SubjectGroupViewerContainer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SubjectGroupViewer/SubjectGroupViewerContainer.js"),components=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/index.js");var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var _excluded=["children"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var subject=rosie.$.build("subject",{locations:[{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"}]}),workflow=rosie.$.build("workflow",{configuration:{subject_viewer:"subjectGroup",cell_width:300,cell_height:200,cell_style:{stroke:"#fff",strokeWidth:"4",fill:"#000"},grid_columns:3,grid_rows:2}}),store=(0,mockStore.A)({subject,workflow});function ViewerContext(_ref){var children=_ref.children;return(0,jsx_runtime.jsx)(mobxreact_esm.Kq,{classifierStore:store,children})}ViewerContext.displayName="ViewerContext";const SubjectGroupViewer_stories={title:"Subject Viewers / SubjectGroupViewer",component:SubjectGroupViewerContainer.A,parameters:{docs:{description:{component:"# Subject Group Viewer\n\nThe Subject Group Viewer (SGV) is a variant of the Subject Viewer that's used to \ndisplay Subjects containing an array of sub-Subjects, with each sub-Subject\nshown on a grid.\n\nThe Subject Group Viewer was originally created by @shaunanoordin on Mar 2020, for the SURVOS project.\n\n## Features\n\n**Intent:**\n\nThe Subject Group Viewer's is designed to address two specific needs:\n\n- (UI/UX) allow volunteers to compare a large number of \"images\" (possible extension: videos too) side-by-side.\n  - _Technical: each \"image\" is actually its own single-image Subject. This super-grouping of single-image Subjects is a variant of a Subject resource called a \"SubjectGroup\", i.e. a Subject that contains Subjects._\n- (Classification) allow volunteers to select any number of cells to answer the Task question. (e.g. \"which of these images look blurry?\")\n  - _Technical: this requires a uniqe Classification task, and the answer will be submitted as an array of Subject IDs._\n\n**UI/UX specifics:**\n\nThe Subject Group Viewer...\n\n- displays Subjects in a grid of X by Y cells.\n- lets you pan the view via mouse-drag or keyboard (arrow keys).\n- lets you zoom the view via mouse-wheel, keyboard (+ and - keys), or pressing the zoom in/zoom out buttons on the Image Toolbar component.\n- panning the view in one cell causes all cells to pan.\n- zooming the view in one cell causes all cells to zoom in/out.\n\nNote: mouse zoom/pan actions only register when the subject viewer is in 'move mode'.\n\nWhen the _current task_ on the Classifier is a Subject Group Task - which usually asks users to mark the images that look different from the others - then the Subject Group Viewer...\n\n- allows users to mark (or unmark) cells by \n- allows users to tab-navigate between cells\n\n**Classification specifics:**\n\n- Annotations in the form of an _array of selected cell indexes._ (Indices?)\n- For example, in a 3x3 grid where the middle and bottom-middle cells are selected, the annotation submitted will look like: `[4, 7]`.\n- Or maybe `[7, 4]`. The annotation doesn't bother to sort the indices. (Indexes?)\n- NOTE: this is just a placeholder. Long-term, the annotations should be in the form of an _array of subject IDs,_ since a Panoptes \"SubjectGroup\" resource is meant to contain a group of single image subjects, with each single image subject being displayed in a single grid cell.\n\n## External Setup\n\n**Workflow: Configuration**\n\nTo enable the SGV, the Workflow of the project must have its `.configuration` set up. For example, this is for a 5x5 grid with 200x200px cells:\n\n```\nworkflow.configuration = {\n  subject_viewer: 'subjectGroup',\n  subject_viewer_config: {\n    cell_width: 200,\n    cell_height: 200,\n    grid_columns: 5,\n    grid_rows: 5,\n  },\n  subject_group: {\n    num_columns: 5,  // This must match grid_columns\n    num_rows: 5,     // This must match grid_rows\n  }\n}\n```\n\n(Note 1: the actual size of the cells will be \"squished\" to fit the actual visible size of the viewer on the classifier.)\n\n(Note 2: `subject_viewer_config` is used by the frontend UI, while `subject_group` is used by the backend service. There's a small duplication of values here, don't mind it.)\n\n**Optional:** if the grid isn't fitting properly on the screen (e.g. the grid is too tall, and since the grid automatically tries to fit to width, this causes the bottom half of the grid to be cut off) then try setting some maximum size settings. Be sure to specify unit of measure, e.g. `px`\n\n```\nworkflow.configuration = {\n  subject_viewer_config: {\n    grid_max_width: '1000px',\n    grid_max_height: '50vh',\n    ...\n  },\n  ...\n}\n```\n\n**Optional:** the SGV can be further configured with specific styles.\n\n```\nworkflow.configuration = {\n  subject_viewer: 'subjectGroup',\n  subject_viewer_config: {\n    cell_width: 1200,\n    cell_height: 1000,\n    cell_style: {\n      stroke: '#fff',\n      strokeWidth: '1',\n      overlay: 'rgba(41,103,255,0.3)',\n      selectedStroke: '#2967FF',\n      selectedStrokeWidth: '8',\n      focusOutline: '2px dashed rgba(255, 255, 255, 0.5)',\n      background: '#000'\n    },\n    grid_columns: 5,\n    grid_rows: 5\n  },\n  subject_group: {\n    num_columns: 5,\n    num_rows: 5,\n  }\n}\n```\n\nSome notes on cell_style:\n\n- 'stroke' and 'strokeWidth' define the border around each cell, when that cell is idle (not being focused on, and not marked as selected)\n- 'selectedStroke' and 'selectedStrokeWidth' define the border around each cell, when that cell is marked/selected.\n- A cell can also be in the \"has keyboard focus\" state. This is visually represented by 'focusOutline'.\n- 'background' indicates the colour to fill the cell with when, e.g. the image doesn't fill the cell's available visible space.\n\n**Associated Subject \"type\": Subject Groups**\n\n- The Subject Group _Viewer_ is STRONGLY ASSOCIATED with the Subject Group \"type\" of Subject.\n- Subjects for the SubjectGroupViewer are a special case; a \"Group Subject\" is a randomised collection of X **single image Subjects** (where X = rows x columns) that the backend packages in to a single \"pseudo\" Subject.\n- Please see `src/store/SubjectGroup/README.md` for more details.\n\n**Associated Task: Subject Group Comparison Task**\n\n- The Subject Group _Viewer_ is STRONGLY ASSOCIATED with the Subject Group _Comparison Task._\n- The SGComparisonTask allows users to CLICK ON cells in the grid to \"select\" them. (i.e. to pick the cells that look different from the others)\n- Without this Task, the viewer is just a fancy way of seeing multiple images in a grid.\n- Please see `src/plugins/tasks/SubjectGroupComparisonTask/README.md` for more details.\n"}}}};var Default=function Default(){return(0,jsx_runtime.jsx)(ViewerContext,{children:(0,jsx_runtime.jsx)(Box.a,{height:"medium",width:"large",children:(0,jsx_runtime.jsx)(SubjectGroupViewerContainer.A,{subject:store.subjects.active})})})};function Toolbar(_ref2){var children=_ref2.children,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref2,_excluded),onKeyZoom=(0,hooks.KG)().onKeyZoom;return(0,jsx_runtime.jsx)(Box.a,_objectSpread(_objectSpread({onKeyDown:onKeyZoom},props),{},{children}))}Default.displayName="Default",Toolbar.displayName="Toolbar";var WithZoomControls=function WithZoomControls(){return(0,jsx_runtime.jsxs)(ViewerContext,{children:[(0,jsx_runtime.jsxs)(Toolbar,{direction:"row",height:"4rem",children:[(0,jsx_runtime.jsx)(components.vB,{}),(0,jsx_runtime.jsx)(components.g3,{}),(0,jsx_runtime.jsx)(components.Z8,{}),(0,jsx_runtime.jsx)(components.MA,{}),(0,jsx_runtime.jsx)(components.wi,{}),(0,jsx_runtime.jsx)(components.U9,{})]}),(0,jsx_runtime.jsx)(Box.a,{height:"medium",width:"large",children:(0,jsx_runtime.jsx)(SubjectGroupViewerContainer.A,{subject:store.subjects.active})})]})};WithZoomControls.displayName="WithZoomControls",Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"() => {\n  return <ViewerContext>\n      <Box height='medium' width='large'>\n        <SubjectGroupViewer subject={store.subjects.active} />\n      </Box>\n    </ViewerContext>;\n}",...Default.parameters?.docs?.source}}},WithZoomControls.parameters={...WithZoomControls.parameters,docs:{...WithZoomControls.parameters?.docs,source:{originalSource:"() => {\n  return <ViewerContext>\n      <Toolbar direction='row' height='4rem'>\n        <AnnotateButton />\n        <MoveButton />\n        <ZoomInButton />\n        <ZoomOutButton />\n        <RotateButton />\n        <ResetButton />\n      </Toolbar>\n      <Box height='medium' width='large'>\n        <SubjectGroupViewer subject={store.subjects.active} />\n      </Box>\n    </ViewerContext>;\n}",...WithZoomControls.parameters?.docs?.source}}};const __namedExportsOrder=["Default","WithZoomControls"]},"./src/components/Classifier/components/SubjectViewer/components/SubjectGroupViewer/SubjectGroupViewerContainer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../lib-async-states/src/async-states.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0__),mobx_state_tree__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/mobx-state-tree/dist/mobx-state-tree.module.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/index.js"),_SubjectGroupViewer__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SubjectGroupViewer/SubjectGroupViewer.js"),_helpers_locationValidator__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var DEFAULT_CELL_STYLE={stroke:"#fff",strokeWidth:"1",overlay:"rgba(41,103,255,0.3)",selectedStroke:"#2967FF",selectedStrokeWidth:"8",focusOutline:"2px dashed rgba(255, 255, 255, 0.5)",background:"#000"},DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function SubjectGroupViewerContainer(_ref){_ref.addAnnotation;var annotation=_ref.annotation,cellWidth=_ref.cellWidth,cellHeight=_ref.cellHeight,cellStyle=_ref.cellStyle,gridColumns=_ref.gridColumns,gridRows=_ref.gridRows,gridMaxWidth=_ref.gridMaxWidth,gridMaxHeight=_ref.gridMaxHeight,_ref$ImageObject=_ref.ImageObject,ImageObject=void 0===_ref$ImageObject?window.Image:_ref$ImageObject,_ref$interactionMode=_ref.interactionMode,interactionMode=void 0===_ref$interactionMode?"annotate":_ref$interactionMode,isCurrentTaskValidForAnnotation=_ref.isCurrentTaskValidForAnnotation,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DEFAULT_HANDLER:_ref$onReady,_ref$setOnPan=_ref.setOnPan,setOnPan=void 0===_ref$setOnPan?DEFAULT_HANDLER:_ref$setOnPan,_ref$setOnZoom=_ref.setOnZoom,setOnZoom=void 0===_ref$setOnZoom?DEFAULT_HANDLER:_ref$setOnZoom,_ref$subject=_ref.subject,subject=void 0===_ref$subject?void 0:_ref$subject,onKeyZoom=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.KG)().onKeyZoom,groupViewer=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(),scrollContainer=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(),_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),2),images=_useState2[0],setImages=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0),2),panX=_useState4[0],setPanX=_useState4[1],_useState6=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0),2),panY=_useState6[0],setPanY=_useState6[1],_useState8=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1),2),zoom=_useState8[0],setZoom=_useState8[1];function onUnmount(){var _scrollContainer$curr;setOnPan((function(){return!0})),setOnZoom((function(){return!0})),null===(_scrollContainer$curr=scrollContainer.current)||void 0===_scrollContainer$curr||_scrollContainer$curr.removeEventListener("wheel",onWheel)}function fetchImage(url){return new Promise((function(resolve,reject){var img=new ImageObject;return img.onload=function(){return resolve(img)},img.onerror=reject,img.src=url,img}))}function preload(){return _preload.apply(this,arguments)}function _preload(){return(_preload=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var imageUrls,_images;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(null==subject||!subject.locations){_context.next=6;break}return imageUrls=subject.locations.map((function(l){return l.url})),_context.next=4,Promise.all(imageUrls.map(fetchImage));case 4:_images=_context.sent,setImages(_images);case 6:return _context.abrupt("return");case 7:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function getGridSize(){var svg=groupViewer.current||{},_ref2=svg.getBoundingClientRect&&svg.getBoundingClientRect()||{},clientWidth=_ref2.width;return{clientHeight:_ref2.height,clientWidth,gridHeight:gridRows*cellHeight,gridWidth:gridColumns*cellWidth}}function _onLoad(){return(_onLoad=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var _getGridSize,clientHeight,clientWidth,naturalHeight,naturalWidth;return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,preload();case 3:_getGridSize=getGridSize(),clientHeight=_getGridSize.clientHeight,clientWidth=_getGridSize.clientWidth,naturalHeight=_getGridSize.gridHeight,naturalWidth=_getGridSize.gridWidth,onReady({target:{clientHeight,clientWidth,naturalHeight,naturalWidth}}),_context2.next=12;break;case 8:_context2.prev=8,_context2.t0=_context2.catch(0),console.error(_context2.t0),onError(_context2.t0);case 12:case"end":return _context2.stop()}}),_callee2,null,[[0,8]])})))).apply(this,arguments)}function onDrag(event,difference){doPan(difference.x,difference.y)}function onPanViaExternalControls(dx,dy){var ARBITRARY_FACTOR=Math.min(cellWidth,cellHeight)/20;doPan(dx*ARBITRARY_FACTOR,dy*ARBITRARY_FACTOR)}function doPan(dx,dy){setPanX((function(_panX){return _panX+dx})),setPanY((function(_panY){return _panY+dy}))}function onZoomViaExternalControls(type){doZoom(type)}function doZoom(type){switch(type){case"zoomin":setZoom((function(_zoom){return Math.min(_zoom+.1,4)}));break;case"zoomout":setZoom((function(_zoom){return Math.max(_zoom-.1,1)}));break;case"zoomto":setZoom(1),setPanX(0),setPanY(0)}}function onWheel(event){doZoom(event.deltaY<0?"zoomout":"zoomin"),function preventDefault(e){e.preventDefault()}(event)}(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function onMount(){var _scrollContainer$curr2;return function onLoad(){return _onLoad.apply(this,arguments)}(),setOnPan(onPanViaExternalControls),setOnZoom(onZoomViaExternalControls),null===(_scrollContainer$curr2=scrollContainer.current)||void 0===_scrollContainer$curr2||_scrollContainer$curr2.addEventListener("wheel",onWheel),onUnmount}),[]);var gridWidth=gridColumns*cellWidth,gridHeight=gridRows*cellHeight;return loadingState===_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default().error?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{children:"Something went wrong."}):subject&&subject.locations&&subject.locations.length>0&&cellHeight>0&&cellWidth>0&&gridColumns>0&&gridRows>0?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{ref:scrollContainer,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_SubjectGroupViewer__WEBPACK_IMPORTED_MODULE_4__.A,{ref:groupViewer,images,subjectIds:subject.subjectIds,dragMove:function dragMove(event,difference){onDrag&&onDrag(event,difference)},onKeyDown:onKeyZoom,cellWidth,cellHeight,cellStyle,gridRows,gridColumns,gridMaxWidth,gridMaxHeight,width:gridWidth,height:gridHeight,panX,panY,zoom,annotation,interactionMode,isCurrentTaskValidForAnnotation})}):null}SubjectGroupViewerContainer.displayName="SubjectGroupViewerContainer",SubjectGroupViewerContainer.propTypes={subject:prop_types__WEBPACK_IMPORTED_MODULE_8___default().shape({locations:prop_types__WEBPACK_IMPORTED_MODULE_8___default().arrayOf(_helpers_locationValidator__WEBPACK_IMPORTED_MODULE_5__.A),subjectIds:prop_types__WEBPACK_IMPORTED_MODULE_8___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_8___default().string)}),loadingState:prop_types__WEBPACK_IMPORTED_MODULE_8___default().string,onError:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func,onReady:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func,interactionMode:prop_types__WEBPACK_IMPORTED_MODULE_8___default().oneOf(["annotate","move"]),setOnPan:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func,setOnZoom:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.Lg)(SubjectGroupViewerContainer,(function storeMapper(classifierStore){var _activeWorkflow$confi,_classifierStore$subj=classifierStore.subjectViewer,interactionMode=_classifierStore$subj.interactionMode,setOnPan=_classifierStore$subj.setOnPan,setOnZoom=_classifierStore$subj.setOnZoom,activeWorkflow=classifierStore.workflows.active,viewerConfig=(null==activeWorkflow||null===(_activeWorkflow$confi=activeWorkflow.configuration)||void 0===_activeWorkflow$confi?void 0:_activeWorkflow$confi.subject_viewer_config)||{},cellWidth=viewerConfig.cell_width||1200,cellHeight=viewerConfig.cell_height||1e3,cellStyle=viewerConfig.cell_style||DEFAULT_CELL_STYLE,gridColumns=viewerConfig.grid_columns||3,gridRows=viewerConfig.grid_rows||3,gridMaxWidth=viewerConfig.grid_max_width||"",gridMaxHeight=viewerConfig.grid_max_height||"",currentTask=_slicedToArray(classifierStore.workflowSteps.activeStepTasks.filter((function(task){return"subjectGroupComparison"===task.type})),1)[0],_classifierStore$clas=classifierStore.classifications,addAnnotation=_classifierStore$clas.addAnnotation,classification=_classifierStore$clas.active,isCurrentTaskValidForAnnotation=!!currentTask;return{cellWidth,cellHeight,cellStyle,gridColumns,gridRows,gridMaxWidth,gridMaxHeight,interactionMode,setOnZoom,setOnPan,addAnnotation,annotation:(classification?Array.from(classification.annotations.values()):[]).find((function(item){return"SubjectGroupComparisonAnnotation"===(0,mobx_state_tree__WEBPACK_IMPORTED_MODULE_7__.Pw)(item).name})),isCurrentTaskValidForAnnotation}}));SubjectGroupViewerContainer.__docgenInfo={description:"",methods:[],displayName:"SubjectGroupViewerContainer",props:{ImageObject:{defaultValue:{value:"window.Image",computed:!0},required:!1},interactionMode:{defaultValue:{value:"'annotate'",computed:!1},description:"",type:{name:"enum",value:[{value:"'annotate'",computed:!1},{value:"'move'",computed:!1}]},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setOnPan:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setOnZoom:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},subject:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1},subjectIds:{name:"arrayOf",value:{name:"string"},required:!1}}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>locationValidator_locationValidator});var valid_url=__webpack_require__("../../node_modules/valid-url/index.js"),mimeTypeRe=/^[-\w+.]+\/[-\w+.]+$/;const locationValidator_locationValidator=function locationValidator(propValue,key,componentName,location,propFullName){var subjectLocation=propValue[key],mimeType=subjectLocation.mimeType,url=subjectLocation.url;if(!mimeTypeRe.test(mimeType)||!(0,valid_url.isUri)(url))return new Error("Invalid prop `"+propFullName+"` supplied to `"+componentName+"`. Validation failed.")}},"./test/factories/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{wC:()=>DrawingTaskFactory,vR:()=>FieldGuideFactory,MJ:()=>FieldGuideMediumFactory,uQ:()=>ProjectFactory,vk:()=>SubjectFactory,$Z:()=>SubjectSetFactory,Ym:()=>TutorialMediumFactory,ez:()=>UPPFactory,s4:()=>WorkflowFactory});var rosie=__webpack_require__("../../node_modules/rosie/src/rosie.js"),medium=(new rosie.$).sequence("id",(function(id){return id.toString()})).attr("external_link",!1),TutorialMediumFactory=(new rosie.$).extend(medium).attr("content_type","image/gif").attr("href",["id"],(function(id){return"/tutorials/20/attached_images/".concat(id)})).attr("links",{linked:{href:"/tutorials/20",id:"20",type:"tutorials"}}).attr("media_type","tutorial_attached_image").attr("metadata",{}).attr("src","https://panoptes-uploads.zooniverse.org/staging/tutorial_attached_image/1ab2bd93-b422-4d10-a700-fa34d4e7e716.gif"),FieldGuideMediumFactory=(new rosie.$).extend(medium).attr("content_type","image/png").attr("external_link",!1).attr("href",["id"],(function(id){return"/field_guides/25/attached_images/".concat(id)})).attr("links",{linked:{href:"/field_guides/25",id:"20",type:"field_guides"}}).attr("media_type","field_guide_attached_image").attr("metadata",{}).attr("src","https://panoptes-uploads.zooniverse.org/staging/field_guide_attached_image/a04dc00f-ef28-4e52-9490-368ba9029aca.png");const ProjectFactory=(new rosie.$).sequence("id",(function(id){return id.toString()})).option("activeWorkflowId","12345").option("workflowId","67890").attr("display_name",["id"],(function(id){return"Project #".concat(id)})).attr("configuration",["activeWorkflowId"],(function(activeWorkflowId){return{default_workflow:activeWorkflowId}})).attr("experimental_tools",[]).attr("links",["activeWorkflowId","workflowId"],(function(activeWorkflowId,workflowId){return{active_workflows:[activeWorkflowId],workflows:[activeWorkflowId,workflowId]}})).attr("slug","zooniverse/example");const SubjectFactory=rosie.$.define("subject").sequence("id",(function(id){return id.toString()})).attr("already_seen",!1).attr("favorite",!1).attr("finished_workflow",!1).attr("locations",(function(){return[1,2,3,4,5,6,7,8,9,10,11].map((function(int){var randomString=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);return{"image/png":"https://foo.bar/".concat(randomString,".png")}}))})).attr("metadata",{}).attr("retired",!1).attr("selected_at","2019-04-11T11:16:29.063Z").attr("selection_state","").attr("user_has_finished_workflow",!1),SubjectSetFactory=rosie.$.define("subject_set").sequence("id",(function(id){return id.toString()})).attr("display_name","Hello there!").attr("metadata",{}).attr("set_member_subjects_count",56).attr("links",{});var subjectSets=rosie.$.buildList("subject_set",5);const WorkflowFactory=rosie.$.define("workflow").sequence("id",(function(id){return id.toString()})).attr("display_name",["id"],(function(id){return"Workflow #".concat(id)})).attr("active",!0).attr("configuration",{}).attr("first_task","").attr("grouped",!1).attr("links",{subject_sets:subjectSets.map((function(subjectSet){return subjectSet.id}))}).attr("tasks",{}).attr("steps",[]).attr("subjectSets",{resources:{}}).attr("version","1.0"),UPPFactory=((new rosie.$).sequence("id",(function(id){return id.toString()})).attr("display_name",["id"],(function(id){return"Tutorial #".concat(id)})).attr("kind","tutorial").attr("language","en").attr("steps",[]),(new rosie.$).sequence("id",(function(id){return id.toString()})).attr("activity_count",100).attr("activity_count_by_workflow",{}).attr("links",{}).attr("preferences",{minicourses:{},selected_workflow:"",tutorials_completed_at:{}}).attr("settings",{})),FieldGuideFactory=((new rosie.$).sequence("id",(function(id){return id.toString()})).attr("admin",!1).attr("avatar_src","").attr("banned",!1).attr("beta_email_communication",!0).attr("credited_name","Jane Doe").attr("display_name","Jane").attr("email","jane@gmail.com").attr("global_email_communication",!0).attr("href",["id"],(function(id){return"/users/".concat(id)})).attr("intervention_notifications",!0).attr("languages",[]).attr("login","janedoe01").attr("login_prompt",!1).attr("private_profile",!0).attr("project_email_communication",!0).attr("subject_limit",100).attr("type","users").attr("upload_whitelist",!1).attr("uploaded_subjects_count",0).attr("ux_test_email_communication",!1).attr("valid_email",!0).attr("zooniverse_id",""),(new rosie.$).sequence("id",(function(id){return id.toString()})).attr("annotations",{}).attr("completed",!1).attr("links",{}).attr("metadata",{classifier_version:"2.0",source:"api",userLanguage:"",workflowVersion:""}),(new rosie.$).sequence("id",(function(id){return id.toString()})).attr("items",[]).attr("language","en")),DrawingTaskFactory=((new rosie.$).attr("isActive",!1).attr("rules",{}).attr("show_model",!1),(new rosie.$).attr("instruction","Please draw something").attr("tools",[]).attr("type","drawing"));(new rosie.$).attr("answers",[{label:"red"},{label:"blue"},{label:"green"}]).attr("required","").attr("strings",{question:"Check all of the colors that apply"}).attr("type","multiple"),(new rosie.$).attr("answers",[{label:"Yes"},{label:"No"}]).attr("required","true").attr("strings",{question:"Is there a galaxy?"}).attr("taskKey","").attr("type","single"),(new rosie.$).attr("modifiers",["insertion","deletion"]).attr("required",!1).attr("instruction","Enter some text").attr("taskKey","").attr("type","text"),(new rosie.$).attr("instruction","Please transcribe the text").attr("tools",[{details:[{instruction:"transcribe the text.",taskKey:"T0.0",type:"text"}],type:"transcriptionLine"}]).attr("type","transcription");var cuid=__webpack_require__("../../node_modules/cuid/index.js"),cuid_default=__webpack_require__.n(cuid);(new rosie.$).attr("id",cuid_default()()).attr("task","T0").attr("taskType","single").attr("value",0)},"./test/mockStore/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>mockStore});var async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),rosie=__webpack_require__("../../node_modules/rosie/src/rosie.js"),sinon_esm=__webpack_require__("../../node_modules/sinon/pkg/sinon-esm.js"),store=__webpack_require__("./src/store/index.js"),factories=__webpack_require__("./test/factories/index.js");function createResponse(url,factories){var endpoint=url.split("/")[1],response={},mockResponse=factories[url]||factories[endpoint];return response[endpoint]=mockResponse?[].concat(mockResponse):[],Promise.resolve({body:response})}const branchingWorkflow=factories.s4.build({display_name:"Branching workflow",first_task:"T0",tasks:{T0:{answers:[{label:"yes",next:"T1"},{label:"no",next:"T2"}],question:"Is there a cat?",required:!1,taskKey:"T0",type:"single"},T1:{answers:[{label:"napping"},{label:"standing"},{label:"playing"}],question:"What is/are the cat(s) doing?",required:!1,taskKey:"T1",type:"multiple"},T2:{answers:[{label:"oranges"},{label:"apples"},{label:"bananas"}],question:"Favourite fruit?",required:!1,taskKey:"T2",type:"multiple"}},version:"0.0"});function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var defaultClient={caesar:{request:sinon_esm.Ay.stub().callsFake((function(){return Promise.resolve({})}))},tutorials:{get:sinon_esm.Ay.stub().callsFake((function(){return Promise.resolve({body:{tutorials:[]}})}))}},defaultAuthClient={checkBearerToken:sinon_esm.Ay.stub().callsFake((function(){return Promise.resolve(null)})),checkCurrent:sinon_esm.Ay.stub().callsFake((function(){return Promise.resolve(null)})),listen:sinon_esm.Ay.stub(),stopListening:sinon_esm.Ay.stub()};function mockStore(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$authClient=_ref.authClient,authClient=void 0===_ref$authClient?defaultAuthClient:_ref$authClient,_ref$client=_ref.client,client=void 0===_ref$client?defaultClient:_ref$client,project=_ref.project,subject=_ref.subject,subjectSet=_ref.subjectSet,_ref$workflow=_ref.workflow,workflow=void 0===_ref$workflow?branchingWorkflow:_ref$workflow,subjectSnapshot=subject||factories.vk.build({metadata:{}}),subjectSetSnapshot=subjectSet||factories.$Z.build(),workflowSnapshot=workflow||factories.s4.build(),projectSnapshot=project||factories.uQ.build({},{activeWorkflowId:workflowSnapshot.id}),subjectResources={};rosie.$.buildList("subject",9).forEach((function(subject){return subjectResources[subject.id]=subject})),subjectResources[subjectSnapshot.id]=subjectSnapshot;var _stubPanoptesJs=function stubPanoptesJs(factories){return{panoptes:{get:function get(url){return createResponse(url,factories)},post:function post(url){return createResponse(url,factories)},put:function put(url){return createResponse(url,factories)}}}}({field_guides:[],projects:[projectSnapshot],subjects:Object.values(subjectResources),tutorials:[],workflows:[workflowSnapshot]}),panoptes=_stubPanoptesJs.panoptes,rootStore=store.A.create({projects:{active:projectSnapshot.id,loadingState:async_states_default().success,resources:_defineProperty({},projectSnapshot.id,projectSnapshot)},subjects:{active:subjectSnapshot.id,loadingState:async_states_default().success,queue:Object.keys(subjectResources),resources:subjectResources},subjectSets:{active:subjectSetSnapshot.id,loadingState:async_states_default().success,resources:_defineProperty({},subjectSetSnapshot.id,subjectSetSnapshot)},workflows:{active:workflowSnapshot.id,loadingState:async_states_default().success,resources:_defineProperty({},workflowSnapshot.id,workflowSnapshot)}},{authClient:_objectSpread(_objectSpread({},defaultAuthClient),authClient),client:_objectSpread(_objectSpread({},defaultClient),{},{panoptes},client)});return rootStore.subjects.setActiveSubject(subjectSnapshot.id),rootStore}}}]);